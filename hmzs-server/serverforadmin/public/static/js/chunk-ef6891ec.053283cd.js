(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef6891ec"],{"2e68":function(e,t,r){"use strict";r("9898")},8593:function(e,t,r){"use strict";r.d(t,"f",(function(){return a})),r.d(t,"h",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"g",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return d})),r.d(t,"i",(function(){return f}));var n=r("b775");function a(e){return Object(n["a"])({url:"/park/sys/role",params:e})}function s(){return Object(n["a"])({url:"/park/sys/permision/all/tree"})}function c(e){return Object(n["a"])({url:"/park/sys/role/".concat(e)})}function i(e){return Object(n["a"])({url:"/park/sys/roleUser/".concat(e)})}function o(e){return Object(n["a"])({url:"/park/sys/user",params:e})}function u(e){return Object(n["a"])({url:"/park/sys/user",method:"POST",data:e})}function l(e){return Object(n["a"])({url:"/park/sys/user/".concat(e),method:"DELETE"})}function d(e){return Object(n["a"])({url:"/park/sys/role",method:"POST",data:e})}function f(e){return Object(n["a"])({url:"/park/sys/role",method:"PUT",data:e})}},9898:function(e,t,r){},acff:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"role-container"},[r("div",{staticClass:"left-wrapper"},[e._l(e.roleList,(function(t,n){return r("div",{key:t.roleId,staticClass:"role-item",class:{active:e.currentIndex===n},on:{click:function(t){return e.switchTab(n)}}},[r("div",{staticClass:"role-info"},[r("svg-icon",{staticClass:"icon",attrs:{"icon-class":e.currentIndex===n?"user-active":"user"}}),e._v(" "+e._s(t.roleName)+" ")],1),r("div",{staticClass:"more"},[r("el-dropdown",[r("span",{staticClass:"el-dropdown-link"},[r("svg-icon",{attrs:{"icon-class":"more"}})],1),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{nativeOn:{click:function(r){return e.goEdit(t.roleId)}}},[e._v("编辑角色")]),r("el-dropdown-item",[e._v("删除")])],1)],1)],1)])})),r("el-button",{staticClass:"addBtn",attrs:{size:"mini"},on:{click:function(t){return e.$router.push("/addRole")}}},[e._v("添加角色")])],2),r("div",{staticClass:"right-wrapper"},[r("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"功能权限",name:"first"}},[r("div",{staticClass:"tree-wrapper"},e._l(e.treeList,(function(t){return r("div",{key:t.id,staticClass:"tree-item"},[r("div",{staticClass:"tree-title"},[e._v(" "+e._s(t.title)+" ")]),r("el-tree",{ref:"tree",refInFor:!0,attrs:{data:t.children,props:e.defaultProps,"show-checkbox":!0,"node-key":"id","default-expand-all":""}})],1)})),0)]),r("el-tab-pane",{attrs:{label:"成员列表",name:"second"}},[r("div",{staticClass:"user-wrapper"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleUserList}},[r("el-table-column",{attrs:{type:"index",width:"250",label:"序号"}}),r("el-table-column",{attrs:{prop:"name",label:"员工姓名"}}),r("el-table-column",{attrs:{prop:"userName",label:"登录账号"}})],1)],1)])],1)],1)])},a=[],s=r("c7eb"),c=r("1da1"),i=(r("d3b7"),r("159b"),r("14d9"),r("8593"));var o={name:"Role",data:function(){return{roleList:[],currentIndex:0,treeList:[],defaultProps:{children:"children",label:"title",disabled:function(e,t){return!0}},activeName:"first",roleUserList:[]}},mounted:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getRoleList();case 2:return t.next=4,e.getTreeList();case 4:e.switchTab(0);case 5:case"end":return t.stop()}}),t)})))()},methods:{goEdit:function(e){console.log("去编辑"),this.$router.push({path:"/addRole",query:{roleId:e}})},highLightPerms:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function r(){var n,a;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["e"])(e);case 2:n=r.sent,a=n.data.perms,t.$refs.tree.forEach((function(e,t){e.setCheckedKeys(a[t])}));case 5:case"end":return r.stop()}}),r)})))()},getUserMember:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function r(){var n;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["g"])(e);case 2:n=r.sent,t.roleUserList=n.data.rows;case 4:case"end":return r.stop()}}),r)})))()},switchTab:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function r(){var n;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.currentIndex=e,n=t.roleList[e].roleId,t.highLightPerms(n),t.getUserMember(n);case 4:case"end":return r.stop()}}),r)})))()},getRoleList:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["f"])();case 2:r=t.sent,e.roleList=r.data;case 4:case"end":return t.stop()}}),t)})))()},getTreeList:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["h"])();case 2:r=t.sent,e.treeList=r.data;case 4:case"end":return t.stop()}}),t)})))()}}},u=o,l=(r("2e68"),r("2877")),d=Object(l["a"])(u,n,a,!1,null,"3ee7a228",null);t["default"]=d.exports}}]);